---
title: "ABC239の解説"
date: 2022-02-20T13:56:21+09:00
draft: false
---

3 ヶ月ぶりのコンテスト参加。ただし Unrated。
6 完

## A - Horizon

やるだけ

## B - Integer Division

X が負かつ 10 で割り切れないときだけ、X/10 に-1 を加える。

## C - Knight Fork

「二つの点から距離 √5 である格子点が存在する」ということは、
「それぞれの点から距離 √5 である格子点を列挙した時、重なる物が 1 つ以上ある」ということになる。

なので、それぞれの点の距離 √5 の格子点の集合に対して、共通集合が存在するかを確認すればよい。

## D - Prime Sum Game

高橋君が選べる全ての数字に対して、足すことで素数になるような数字を青木君が選べればよい。

具体的には、以下のような処理を行う

1. A~B の数字を順番に選んでいく。この数字を i とする
2. i に対して、C~D の数字を足していく。この和を j とする
3. j が素数の場合は、1.で選んだ数字の次の数字で 2.以降を試す。逆に、素数となる j が存在しなければ、その時点で高橋君の勝ちが確定する
4. 全ての i に対して j が素数となるような数字を青木君が選べた場合、青木君の勝利

## E - Subtree K-th Max

Ki は高々 20 なので、愚直に計算していけば良い。
具体的には、各頂点に対して部分木に書かれた値の降順リスト（長さ最大 20）を用意し、以下の手順をボトムアップに繰り返す。

1. 今見ている頂点が葉の場合、リストに自身を加えて親の処理に移る
2. 葉でない場合、自身の値と、自身と直接繋がっている子のリストを全て連結し、ソートする
   このとき、子のリストの長さは高々 20 であり、子の数は最大で 10^5 個なので、ソートは十分に間に合う
3. 2.で得られたリストの上位 20 個の要素を自分のリストに挿入する

## F - Construct Highway

まず初めに、最初から連結している頂点の集合を、Union-Find 等を利用して求める

次に、それぞれの頂点群に対して、辺を接続できる数、つまり、頂点 i に対して、現在生えている辺の数を Di から引いた数の和を求める

そして、頂点群の集合を辺を接続できる数降順にソートする

まずは空のリスト A を用意し、そこに先ほどソートした頂点群の一つを挿入する

次に順番に頂点群の集合から頂点群を A に挿入していく

挿入する際は、A の頂点群の内接続できる辺が余っている頂点と、新しく加わる頂点群の内、接続可能な頂点を接続していく

この操作の途中で A 内に接続できる頂点が残っていない、あるいは新しく加えたい頂点群の中に接続可能な頂点がない場合は建設方法が存在しない

同様に、全ての頂点群を A に挿入した後に、接続可能な頂点が残っていれば、建設方法が存在しない
